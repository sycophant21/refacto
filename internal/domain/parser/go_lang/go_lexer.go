package go_lang

import "refacto/pkg/parser"

var (
	categoriesMap         = make(map[string]*goLexTokenCategoryWrapper)
	categoriesIndexMap    = make(map[GoLexTokenCategory]*goLexTokenCategoryWrapper)
	subcategoriesIndexMap = make(map[GoLexTokenSubCategory]*goLexTokenSubCategoryWrapper)
	keywords              = make(map[string]GoLexTokenSubCategory)
)

const (
	// Identifier
	IDENT = iota
	// Literal
	INT
	FLOAT
	STRING
	RUNE
	// Keyword
	BOOL_KEYWORD
	BREAK_KEYWORD
	BYTE_KEYWORD
	CASE_KEYWORD
	CHAN_KEYWORD
	COMPLEX_64_BIT_KEYWORD
	COMPLEX_128_BIT_KEYWORD
	CONST_KEYWORD
	CONTINUE_KEYWORD
	DEFAULT_KEYWORD
	DEFER_KEYWORD
	ELSE_KEYWORD
	FALL_THROUGH_KEYWORD
	FLOAT_32_BIT_KEYWORD
	FLOAT_64_BIT_KEYWORD
	FOR_KEYWORD
	FUNC_KEYWORD
	GO_KEYWORD
	GOTO_KEYWORD
	IF_KEYWORD
	IMPORT_KEYWORD
	INT_KEYWORD
	INT_8_BIT_KEYWORD
	INT_16_BIT_KEYWORD
	INT_32_BIT_KEYWORD
	INT_64_BIT_KEYWORD
	INTERFACE_KEYWORD
	MAP_KEYWORD
	PACKAGE_KEYWORD
	RANGE_KEYWORD
	RETURN_KEYWORD
	RUNE_KEYWORD
	SELECT_KEYWORD
	STRING_KEYWORD
	STRUCT_KEYWORD
	SWITCH_KEYWORD
	TYPE_KEYWORD
	UNSIGNED_INT_KEYWORD
	UNSIGNED_INT_8_BIT_KEYWORD
	UNSIGNED_INT_16_BIT_KEYWORD
	UNSIGNED_INT_32_BIT_KEYWORD
	UNSIGNED_INT_64_BIT_KEYWORD
	UNSIGNED_POINTER_KEYWORD
	VAR_KEYWORD
	// Operator
	// Arithmetic
	ADD_ARITHMETIC_OPERATOR
	SUBTRACT_ARITHMETIC_OPERATOR
	MULTIPLY_ARITHMETIC_OPERATOR
	DIVIDE_ARITHMETIC_OPERATOR
	MODULO_ARITHMETIC_OPERATOR
	// Assignment
	ASSIGN_ASSIGNMENT_OPERATOR
	ADD_ASSIGN_ASSIGNMENT_OPERATOR
	SUBTRACT_ASSIGN_ASSIGNMENT_OPERATOR
	MULTIPLY_ASSIGN_ASSIGNMENT_OPERATOR
	DIVIDE_ASSIGN_ASSIGNMENT_OPERATOR
	MODULO_ASSIGNMENT_OPERATOR
	AND_BITWISE_ASSIGN_ASSIGNMENT_OPERATOR
	OR_BITWISE_ASSIGN_ASSIGNMENT_OPERATOR
	XOR_BITWISE_ASSIGN_ASSIGNMENT_OPERATOR
	SHORT_ASSIGN_ASSIGNMENT_OPERATOR
	// Comparison
	EQUALS_COMPARSION_OPERATOR
	NOT_EQUALS_COMPARSION_OPERATOR
	LESS_THAN_COMPARSION_OPERATOR
	GREATER_THAN_COMPARSION_OPERATOR
	LESS_THAN_EQUALS_COMPARSION_OPERATOR
	GREATER_THAN_EQUALS_COMPARSION_OPERATOR
	// Logical
	AND_LOGICAL_OPERATOR
	OR_LOGICAL_OPERATOR
	NOT_LOGICAL_OPERATOR
	// Bitwise
	AND_BITWISE_OPERATOR
	OR_BITWISE_OPERATOR
	XOR_BITWISE_OPERATOR
	SHIFT_LEFT_BITWISE_OPERATOR
	SHIFT_RIGHT_BITWISE_OPERATOR
	// Punctuation
	LEFT_PARENTHESIS_PUNCTUATION
	RIGHT_PARENTHESIS_PUNCTUATION
	LEFT_BRACES_PUNCTUATION
	RIGHT_BRACES_PUNCTUATION
	LEFT_BRACKET_PUNCTUATION
	RIGHT_BRACKET_PUNCTUATION
	COMMA_PUNCTUATION
	DOT_PUNCTUATION
	SEMI_COLON_PUNCTUATION
	COLON_PUNCTUATION
	ELLIPSIS_PUNCTUATION
	// Special
	NEW_LINE_SPECIAL_CONSTRUCT
	EOF_SPECIAL_CONSTRUCT
	LINE_COMMENT_SPECIAL_CONSTRUCT
	BLOCK_COMMENT_START_SPECIAL_CONSTRUCT
	BLOCK_COMMENT_END_SPECIAL_CONSTRUCT
	// ERROR/INVALID
	ILLEGAL
)

type (
	GoLexToken struct {
		category    goLexTokenCategoryWrapper
		subCategory goLexTokenSubCategoryWrapper
		value       string
		position    parser.Position
	}
	goLexTokenCategoryWrapper struct {
		Category GoLexTokenCategory
		Value    string
	}
	GoLexTokenCategory           int
	goLexTokenSubCategoryWrapper struct {
		SubCategory GoLexTokenSubCategory
		Value       string
	}
	GoLexTokenSubCategory int
)

// goKeywordSubcategories references all token subcategory constants that
// represent Go language keywords. This ensures the individual *_KEYWORD
// constants are treated as used by static analysis, while keeping the
// keyword set explicit in one place.
var goKeywordSubcategories = []GoLexTokenSubCategory{
	BOOL_KEYWORD,
	BREAK_KEYWORD,
	BYTE_KEYWORD,
	CASE_KEYWORD,
	CHAN_KEYWORD,
	COMPLEX_64_BIT_KEYWORD,
	COMPLEX_128_BIT_KEYWORD,
	CONST_KEYWORD,
	CONTINUE_KEYWORD,
	DEFAULT_KEYWORD,
	DEFER_KEYWORD,
	ELSE_KEYWORD,
	FALL_THROUGH_KEYWORD,
	FLOAT_32_BIT_KEYWORD,
	FLOAT_64_BIT_KEYWORD,
	FOR_KEYWORD,
	FUNC_KEYWORD,
	GO_KEYWORD,
	GOTO_KEYWORD,
	IF_KEYWORD,
	IMPORT_KEYWORD,
	INT_KEYWORD,
	INT_8_BIT_KEYWORD,
	INT_16_BIT_KEYWORD,
	INT_32_BIT_KEYWORD,
	INT_64_BIT_KEYWORD,
	INTERFACE_KEYWORD,
	MAP_KEYWORD,
	PACKAGE_KEYWORD,
	RANGE_KEYWORD,
	RETURN_KEYWORD,
	RUNE_KEYWORD,
	SELECT_KEYWORD,
	STRING_KEYWORD,
	STRUCT_KEYWORD,
	SWITCH_KEYWORD,
	TYPE_KEYWORD,
	UNSIGNED_INT_KEYWORD,
	UNSIGNED_INT_8_BIT_KEYWORD,
	UNSIGNED_INT_16_BIT_KEYWORD,
	UNSIGNED_INT_32_BIT_KEYWORD,
	UNSIGNED_INT_64_BIT_KEYWORD,
	UNSIGNED_POINTER_KEYWORD,
	VAR_KEYWORD,
}

// Lexer struct
type Lexer struct {
	input        string
	position     int  // current position in input (points to current char)
	readPosition int  // current reading position in input (after current char)
	ch           rune // current char under examination
	line         int
	column       int
}
